<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monterey Bay PCs - 3D Builder</title>
<link rel="icon" type="image/png" href="https://static.thenounproject.com/png/pixel-monitor-icon-6766178-512.png">
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f0f1a;
  color: #fff;
  overflow-x: hidden;
}
header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:1rem 2rem;
  background:#111;
  position:sticky;
  top:0;
  z-index:1000;
}
header .logo { font-weight:bold; font-size:1.5rem; color:#fff; cursor:pointer; }
nav a { margin:0 1rem; text-decoration:none; color:#fff; transition: color 0.3s; }
nav a:hover { color:#ff4ecd; }

#builderContainer {
  width: 100%;
  height: 80vh;
  display: block;
  margin: auto;
  z-index: 1;
  position: relative;
}

/* Controls / Dropdowns */
.controls {
  text-align: center;
  margin: 1rem 0;
  position: relative;
  z-index: 5000;
}

.dropdown {
  display: inline-block;
  margin: 0.5rem;
  position: relative;
}

.dropbtn {
  padding: 0.7rem 1.2rem;
  font-weight: bold;
  border-radius: 5px;
  border: none;
  cursor: pointer;
  background: linear-gradient(90deg, #ff4ecd, #6c5ce7, #00f2ff);
  color: #fff;
  box-shadow: 0 0 10px rgba(255,78,205,0.7);
  transition: 0.3s;
}
.dropbtn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(255,78,205,1);
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #111;
  min-width: 200px;
  max-height: 250px;
  overflow-y: auto;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(255,78,205,0.7);
  z-index: 5000;
}

.dropdown.show .dropdown-content {
  display: block;
}

.dropdown-content div {
  padding: 10px;
  cursor: pointer;
}
.dropdown-content div:hover {
  background: rgba(255,78,205,0.2);
}

/* Estimate Display */
#estimate {
  text-align: center;
  margin-top: 1rem;
  font-size: 1.5rem;
  font-weight: bold;
}
</style>
</head>
<body>

<header>
  <div class="logo" onclick="window.location='index.html'">Monterey Bay PCs</div>
  <nav>
    <a href="index.html">Home</a>
    <a href="#builderContainer">PC Builder</a>
    <a href="#support">Support</a>
  </nav>
</header>

<section id="builderContainer"></section>

<div class="controls">
  <div class="dropdown">
    <button class="dropbtn">GPU</button>
    <div class="dropdown-content" id="gpuDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">CPU</button>
    <div class="dropdown-content" id="cpuDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">Case</button>
    <div class="dropdown-content" id="caseDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">RAM</button>
    <div class="dropdown-content" id="ramDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">Storage</button>
    <div class="dropdown-content" id="storageDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">Motherboard</button>
    <div class="dropdown-content" id="motherboardDropdown"></div>
  </div>
</div>

<div id="estimate">Total Estimate: $0</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>
<script>
let scene, camera, renderer, controls, pcModel;
let selectedParts = {
  gpu: {name:'None', price:0},
  cpu: {name:'None', price:0},
  case: {name:'None', price:0},
  ram: {name:'None', price:0},
  storage: {name:'None', price:0},
  motherboard: {name:'None', price:0}
};

function init3D(){
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x0f0f1a);

  camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.set(2,2,5);

  renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(window.innerWidth, window.innerHeight*0.8);
  document.getElementById('builderContainer').appendChild(renderer.domElement);

  controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.dampingFactor = 0.05;

  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(5,5,5);
  scene.add(directionalLight);

  const geometry = new THREE.BoxGeometry(2,3,1);
  const material = new THREE.MeshStandardMaterial({color:0x222222, metalness:0.7, roughness:0.3});
  pcModel = new THREE.Mesh(geometry, material);
  scene.add(pcModel);

  window.addEventListener('resize', ()=>{
    camera.aspect = window.innerWidth / (window.innerHeight*0.8);
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight*0.8);
  });
}

function animate3D(){
  requestAnimationFrame(animate3D);
  controls.update();
  renderer.render(scene, camera);
}

// Dropdown data
const gpus = [
  {name:"GTX 3080", price:699},
  {name:"RTX 4080", price:1199},
  {name:"RX 7900", price:999},
];
const cpus = [
  {name:"Intel i5-13600K", price:320},
  {name:"Intel i9-14900K", price:700},
  {name:"AMD Ryzen 9 7950X", price:720},
];
const cases = [
  {name:"NZXT H510", price:100},
  {name:"Corsair 4000D", price:95},
  {name:"Lian Li PC-O11", price:130},
];
const rams = [
  {name:"16GB DDR5", price:120},
  {name:"32GB DDR5", price:220},
  {name:"64GB DDR5", price:400},
];
const storages = [
  {name:"1TB SSD", price:100},
  {name:"2TB SSD", price:180},
  {name:"4TB NVMe", price:400},
];
const motherboards = [
  {name:"ASUS ROG", price:300},
  {name:"MSI MPG", price:280},
  {name:"Gigabyte Aorus", price:350},
];

function populateDropdown(id, options, key){
  const container = document.getElementById(id);
  options.forEach(opt=>{
    const div = document.createElement('div');
    div.textContent = `${opt.name} ($${opt.price})`;
    div.addEventListener('click', ()=>{
      selectedParts[key] = {name: opt.name, price: opt.price};
      updateEstimate();
      container.parentElement.classList.remove('show');
    });
    container.appendChild(div);
  });
}

function updateEstimate(){
  let total = 0;
  for(let part in selectedParts){
    total += selectedParts[part].price;
  }
  document.getElementById('estimate').textContent = `Total Estimate: $${total}`;
}

// Enable dropdown toggles
function enableDropdowns(){
  document.querySelectorAll(".dropdown .dropbtn").forEach(btn=>{
    btn.addEventListener("click", function(e){
      e.stopPropagation();
      closeAllDropdowns();
      this.parentElement.classList.toggle("show");
    });
  });

  window.addEventListener("click", closeAllDropdowns);
}

function closeAllDropdowns(){
  document.querySelectorAll(".dropdown").forEach(d=>{
    d.classList.remove("show");
  });
}

// Initialize
init3D();
animate3D();
populateDropdown("gpuDropdown", gpus, "gpu");
populateDropdown("cpuDropdown", cpus, "cpu");
populateDropdown("caseDropdown", cases, "case");
populateDropdown("ramDropdown", rams, "ram");
populateDropdown("storageDropdown", storages, "storage");
populateDropdown("motherboardDropdown", motherboards, "motherboard");
enableDropdowns();

</script>
</body>
</html>
