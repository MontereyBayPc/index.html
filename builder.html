<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monterey Bay PCs - 3D Builder</title>
<link rel="icon" type="image/png" href="https://static.thenounproject.com/png/pixel-monitor-icon-6766178-512.png">
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f0f1a;
  color: #fff;
  overflow-x: hidden;
}
header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:1rem 2rem;
  background:#111;
  position:sticky;
  top:0;
  z-index:10000;
}
header .logo { font-weight:bold; font-size:1.5rem; color:#fff; cursor:pointer; }
nav a { margin:0 1rem; text-decoration:none; color:#fff; transition: color 0.3s; }
nav a:hover { color:#ff4ecd; }

#builderContainer {
  width: 100%;
  height: 70vh;
  display: block;
  margin: auto;
  position: relative;
  z-index: 1;
}

/* Controls */
.controls {
  text-align: center;
  margin: 1rem 0;
  position: relative;
  z-index: 10000; 
}
button, .dropbtn {
  padding: 0.7rem 1.2rem;
  font-weight: bold;
  border-radius: 5px;
  border: none;
  margin: 0 0.5rem;
  cursor: pointer;
  background: linear-gradient(90deg, #ff4ecd, #6c5ce7, #00f2ff);
  color: #fff;
  box-shadow: 0 0 10px rgba(255,78,205,0.7);
  transition: 0.3s;
}
button:hover, .dropbtn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(255,78,205,1);
}

/* Dropdown styling */
.dropdown {
  display: inline-block;
  position: relative;
  margin: 0 0.5rem;
}
.dropdown-content {
  display: none;
  position: absolute;
  background-color: #111;
  min-width: 180px;
  max-height: 300px;
  overflow-y: auto;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(255,78,205,0.7);
}
.dropdown-content div {
  padding: 10px;
  cursor: pointer;
}
.dropdown-content div:hover {
  background-color: #222;
}
.dropdown:hover .dropdown-content {
  display: block;
}
.dropdown-content::-webkit-scrollbar {
  width: 6px;
}
.dropdown-content::-webkit-scrollbar-thumb {
  background: #ff4ecd;
  border-radius: 3px;
}

/* Price display */
#priceDisplay {
  text-align: center;
  font-size: 1.5rem;
  margin-top: 1rem;
}
</style>
</head>
<body>

<header>
  <div class="logo" onclick="window.location='index.html'">Monterey Bay PCs</div>
  <nav>
    <a href="index.html">Home</a>
    <a href="#builderContainer">PC Builder</a>
    <a href="#support">Support</a>
  </nav>
</header>

<section id="builderContainer"></section>

<div class="controls">
  <div class="dropdown">
    <button class="dropbtn">GPU</button>
    <div class="dropdown-content" id="gpuDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">CPU</button>
    <div class="dropdown-content" id="cpuDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">RAM</button>
    <div class="dropdown-content" id="ramDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">Storage</button>
    <div class="dropdown-content" id="storageDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">Motherboard</button>
    <div class="dropdown-content" id="mbDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">Case</button>
    <div class="dropdown-content" id="caseDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">PSU</button>
    <div class="dropdown-content" id="psuDropdown"></div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">Cooling</button>
    <div class="dropdown-content" id="coolingDropdown"></div>
  </div>
</div>

<div id="priceDisplay">Estimated Price: $0</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>

<script>
let scene, camera, renderer, controls, pcModel;
let selectedComponents = {
  gpu: null, cpu: null, ram: null, storage: null,
  motherboard: null, case: null, psu: null, cooling: null
};
let totalPrice = 0;
init();
animate();

function init(){
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x0f0f1a);

  camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.set(2,2,5);

  renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(window.innerWidth, window.innerHeight*0.7);
  document.getElementById('builderContainer').appendChild(renderer.domElement);

  controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.dampingFactor = 0.05;

  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(5,5,5);
  scene.add(directionalLight);

  // PC Case Base
  const geometry = new THREE.BoxGeometry(2,3,1);
  const material = new THREE.MeshStandardMaterial({color:0x222222, metalness:0.7, roughness:0.3});
  pcModel = new THREE.Mesh(geometry, material);
  pcModel.name = "pcCase";
  scene.add(pcModel);

  window.addEventListener('resize', onWindowResize, false);

  populateAllDropdowns();
}

function onWindowResize(){
  camera.aspect = window.innerWidth / (window.innerHeight*0.7);
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight*0.7);
}

function animate(){
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
}

// Component data examples
const components = {
  gpu: [
    {name:'GTX 1080', color:0xff4ecd, price:400},
    {name:'RTX 3080', color:0x6c5ce7, price:800},
    {name:'RX 7900', color:0x00ff99, price:900}
  ],
  cpu: [
    {name:'Intel i5', color:0xffaa00, price:200},
    {name:'Intel i7', color:0xff6600, price:350},
    {name:'AMD Ryzen 9', color:0x00ffcc, price:500}
  ],
  ram: [
    {name:'16GB', color:0xff44aa, price:80},
    {name:'32GB', color:0x44ffaa, price:150},
    {name:'64GB', color:0x4488ff, price:300}
  ],
  storage: [
    {name:'1TB SSD', color:0xffcc44, price:100},
    {name:'2TB SSD', color:0x44ffcc, price:180}
  ],
  motherboard: [
    {name:'MSI B550', color:0xff8800, price:180},
    {name:'ASUS ROG', color:0x8844ff, price:300}
  ],
  case: [
    {name:'NZXT H510', color:0x333333, price:100},
    {name:'Corsair 5000D', color:0x555555, price:150}
  ],
  psu: [
    {name:'650W', color:0xff00ff, price:80},
    {name:'850W', color:0xffaa00, price:120}
  ],
  cooling: [
    {name:'Air Cooler', color:0x00ffff, price:50},
    {name:'Liquid Cooler', color:0x0000ff, price:120}
  ]
};

// Populate dropdowns
function populateAllDropdowns(){
  Object.keys(components).forEach(type=>{
    const dropdown = document.getElementById(type+'Dropdown');
    components[type].forEach(item=>{
      const div = document.createElement('div');
      div.textContent = item.name + ' ($' + item.price + ')';
      div.onclick = ()=>selectComponent(type, item);
      dropdown.appendChild(div);
    });
  });
}

// Handle selection
function selectComponent(type, item){
  selectedComponents[type] = item;
  addComponent3D(type, item);
  updatePrice();
}

// Add/update 3D components
function addComponent3D(type, item){
  const oldObj = pcModel.getObjectByName(type);
  if(oldObj) pcModel.remove(oldObj);

  const geometry = new THREE.BoxGeometry(1.5, 0.3, 0.2);
  const material = new THREE.MeshStandardMaterial({color:item.color});
  const mesh = new THREE.Mesh(geometry, material);
  mesh.name = type;

  // Position based on component type
  switch(type){
    case 'gpu': mesh.position.set(0,0,0.5); break;
    case 'cpu': mesh.position.set(0,1,0); break;
    case 'ram': mesh.position.set(-0.5,1.5,0); break;
    case 'storage': mesh.position.set(0.5,1.5,0); break;
    case 'motherboard': mesh.position.set(0,1.2,0); break;
    case 'case': mesh.position.set(0,0,0); break;
    case 'psu': mesh.position.set(0,-1,0); break;
    case 'cooling': mesh.position.set(0,0.8,0); break;
  }
  pcModel.add(mesh);
}

// Update price
function updatePrice(){
  totalPrice = 0;
  Object.values(selectedComponents).forEach(comp=>{
    if(comp) totalPrice += comp.price;
  });
  document.getElementById('priceDisplay').textContent = "Estimated Price: $" + totalPrice;
}
</script>
</body>
</html>
