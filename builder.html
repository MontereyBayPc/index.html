<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monterey Bay PCs - 3D Builder</title>
<link rel="icon" type="image/png" href="https://static.thenounproject.com/png/pixel-monitor-icon-6766178-512.png">
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f0f1a;
  color: #fff;
  overflow-x: hidden;
}
header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:1rem 2rem;
  background:#111;
  position:sticky;
  top:0;
  z-index:1000;
}
header .logo { font-weight:bold; font-size:1.5rem; color:#fff; cursor:pointer; }
nav a { margin:0 1rem; text-decoration:none; color:#fff; transition: color 0.3s; }
nav a:hover { color:#ff4ecd; }

#builderContainer {
  width: 100%;
  height: 70vh;
  display: block;
  margin: auto;
  border-radius:10px;
  overflow:hidden;
}

.controls {
  text-align: center;
  margin: 1rem 0;
}
.controls h3 { margin-bottom:0.5rem; }
button {
  padding: 0.7rem 1.2rem;
  font-weight: bold;
  border-radius: 5px;
  border: none;
  margin: 0 0.5rem 0.5rem 0.5rem;
  cursor: pointer;
  background: linear-gradient(90deg, #ff4ecd, #6c5ce7, #00f2ff);
  color: #fff;
  box-shadow: 0 0 10px rgba(255,78,205,0.7);
  transition: 0.3s;
}
button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(255,78,205,1);
}

#priceDisplay {
  text-align: center;
  font-size: 1.5rem;
  margin-top: 1rem;
}
</style>
</head>
<body>

<header>
  <div class="logo" onclick="window.location='index.html'">Monterey Bay PCs</div>
  <nav>
    <a href="index.html">Home</a>
    <a href="#builderContainer">PC Builder</a>
    <a href="#support">Support</a>
  </nav>
</header>

<section id="builderContainer"></section>

<div class="controls">

  <h3>GPU</h3>
  <button onclick="loadComponent('gpu','models/gtx3080.glb',700)">GTX 3080 - $700</button>
  <button onclick="loadComponent('gpu','models/rtx4080.glb',1200)">RTX 4080 - $1200</button>
  <button onclick="loadComponent('gpu','models/rx7900.glb',900)">RX 7900 - $900</button>

  <h3>CPU</h3>
  <button onclick="loadComponent('cpu','models/intel_i9.glb',500)">Intel i9 - $500</button>
  <button onclick="loadComponent('cpu','models/amd_ryzen9.glb',450)">AMD Ryzen 9 - $450</button>

  <h3>RAM</h3>
  <button onclick="loadComponent('ram','models/ram16.glb',100)">16GB - $100</button>
  <button onclick="loadComponent('ram','models/ram32.glb',200)">32GB - $200</button>

  <h3>Storage</h3>
  <button onclick="loadComponent('storage','models/ssd1tb.glb',120)">1TB SSD - $120</button>
  <button onclick="loadComponent('storage','models/hdd2tb.glb',80)">2TB HDD - $80</button>

  <h3>Motherboard</h3>
  <button onclick="loadComponent('motherboard','models/mb1.glb',200)">ATX - $200</button>
  <button onclick="loadComponent('motherboard','models/mb2.glb',250)">Micro-ATX - $250</button>

  <h3>Case</h3>
  <button onclick="loadComponent('case','models/case1.glb',150)">Mid Tower - $150</button>
  <button onclick="loadComponent('case','models/case2.glb',220)">Full Tower - $220</button>

  <h3>Power Supply (PSU)</h3>
  <button onclick="loadComponent('psu','models/psu750.glb',120)">750W - $120</button>
  <button onclick="loadComponent('psu','models/psu1000.glb',180)">1000W - $180</button>

</div>

<div id="priceDisplay">Estimated Price: $0</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/loaders/GLTFLoader.js"></script>

<script>
let scene, camera, renderer, controls, pcModel;
let selectedParts = {gpu:null, cpu:null, ram:null, storage:null, motherboard:null, psu:null, case:null};
init();
animate();

function init(){
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x0f0f1a);

  camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.set(3,3,6);

  renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(window.innerWidth, window.innerHeight*0.7);
  document.getElementById('builderContainer').appendChild(renderer.domElement);

  controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.dampingFactor = 0.05;

  // Lights
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(5,5,5);
  scene.add(directionalLight);

  // PC Base (invisible container)
  pcModel = new THREE.Group();
  scene.add(pcModel);

  window.addEventListener('resize', onWindowResize, false);
}

function onWindowResize(){
  camera.aspect = window.innerWidth / (window.innerHeight*0.7);
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight*0.7);
}

function animate(){
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
}

async function loadComponent(type, modelUrl, price){
  const loader = new THREE.GLTFLoader();
  const gltf = await loader.loadAsync(modelUrl);

  // Remove old component if exists
  if(selectedParts[type]) pcModel.remove(selectedParts[type].mesh);

  gltf.scene.name = type;
  pcModel.add(gltf.scene);
  selectedParts[type] = {mesh: gltf.scene, price};
  updatePrice();
}

function updatePrice(){
  let total = 0;
  for(const part in selectedParts){
    if(selectedParts[part]) total += selectedParts[part].price;
  }
  document.getElementById('priceDisplay').innerText = "Estimated Price: $" + total.toLocaleString();
}
</script>

</body>
</html>
